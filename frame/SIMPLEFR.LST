Turbo Assembler	 Version 4.1	    02/13/25 06:56:40	    Page 1
simplefr.asm



      1	0000			     .model tiny
      2	0000			     .code
      3				     org 100h
      4
      5	0100  B5 40		     Start:	     mov ch, 40h
      6	0102  B1 10				     mov cl, 10h
      7
      8	0104  E8 0008				     call findCenter
      9	0107  E8 0020				     call drawFrame
     10
     11	010A  B8 4C00				     mov ax, 4c00h
     12	010D  CD 21				     int 21h
     13
     14				     ; ============================================= ;
     15				     ; Find the	(x, y) coordinates of frame's center ;
     16				     ; Entry:	     CL	= height, CH = length	     ;
     17				     ; Exit:	     DX	= frame	start offset	     ;
     18				     ; Destroy List: AX				     ;
     19				     ; ============================================= ;
     20
     21	010F			     findCenter	     proc
     22
     23	010F  B8 0019				     mov ax, 0019h
     24	0112  2A C1				     sub al, cl
     25	0114  D1 E8				     shr ax, 1
     26	0116  8A F0				     mov dh, al
     27
     28	0118  B8 0050				     mov ax, 0050h
     29	011B  2A C5				     sub al, ch
     30	011D  8A D0				     mov dl, al
     31
     32	011F  FE CE				     dec dh
     33	0121  B0 A0				     mov al, 00A0h
     34	0123  F6 E6				     mul dh
     35	0125  B6 00				     mov dh, 0h
     36	0127  03 D0				     add dx, ax
     37
     38	0129  C3				     ret
     39	012A					     endp
     40
     41				     ; ================================================== ;
     42				     ; Draw frame on the screen				  ;
     43				     ; Entry:	     DX	= frame	start offset, CL = height ;
     44				     ; Exit:	     None				  ;
     45				     ; Destroy List: BX, ES, SI, CL			  ;
     46				     ; ================================================== ;
     47
     48	012A			     drawFrame	     proc
     49	012A  BB B800				     mov bx, 0b800h
     50	012D  8E C3				     mov es, bx
     51
     52	012F  8B DA				     mov bx, dx
     53	0131  BE 017Fr				     mov si, offset FRAME_STYLE
     54
     55	0134  53				     push bx
     56	0135  E8 0022				     call drawLine
     57
Turbo Assembler	 Version 4.1	    02/13/25 06:56:40	    Page 2
simplefr.asm



     58	0138  46				     inc si
     59	0139  FE C9				     dec cl
     60
     61	013B					     internalLines:
     62	013B  5B					     pop bx
     63	013C  81 C3 00A0				     add bx, 00A0h
     64	0140  53					     push bx
     65	0141  E8 0016					     call drawLine
     66
     67	0144  83 EE 02					     sub si, 2h
     68	0147  FE C9					     dec cl
     69
     70	0149  80 F9 01					     cmp cl, 1h
     71	014C  75 ED					     jne internalLines
     72
     73	014E  83 C6 03				     add si, 3h
     74	0151  5B				     pop bx
     75	0152  81 C3 00A0			     add bx, 00A0h
     76	0156  E8 0001				     call drawLine
     77
     78	0159  C3				     ret
     79	015A					     endp
     80
     81				     ; ============================================= ;
     82				     ; Draw one	line on	the screen		     ;
     83				     ; Entry:	     SI	= current char addr,	     ;
     84				     ;		     ES	= VMEM start addr	     ;
     85				     ; Exit:	     None			     ;
     86				     ; Destroy List: BX, DX, SI			     ;
     87				     ; ============================================= ;
     88
     89	015A			     drawLine	     proc
     90
     91	015A  51				     push cx
     92	015B  8A 14				     mov dl, byte ptr [si]
     93	015D  B6 75				     mov dh, 75h
     94	015F  26: 89 17				     mov es:[bx], dx
     95
     96	0162  FE CD				     dec ch
     97	0164  83 C3 02				     add bx, 2
     98
     99	0167  46				     inc si
    100	0168  8A 14				     mov dl, byte ptr [si]
    101
    102	016A					     mainLine:
    103	016A  26: 89 17					     mov es:[bx], dx
    104
    105	016D  FE CD					     dec ch
    106	016F  83 C3 02					     add bx, 2
    107
    108	0172  80 FD 01					     cmp ch, 1h
    109	0175  75 F3					     jne mainLine
    110
    111	0177  46				     inc si
    112	0178  8A 14				     mov dl, byte ptr [si]
    113	017A  26: 89 17				     mov es:[bx], dx
    114
Turbo Assembler	 Version 4.1	    02/13/25 06:56:40	    Page 3
simplefr.asm



    115	017D  59				     pop cx
    116
    117	017E  C3				     ret
    118	017F					     endp
    119
    120	017F  03 03 03 03 B0 03	03+  FRAME_STYLE     db	03h, 03h, 03h, 03h, 0b0h, 03h, 03h, 03h, 03h ; hearts
    121	      03 03
    122
    123	0188  53 77 65 65 74 20	46+  STRING	     db	"Sweet February	14th", 0dh, 0ah, \
    124	      65 62 72 75 61 72	79+			"Valentine's Day!",    0dh, 0ah, '$'
    125	      20 31 34 74 68 0D	0A+
    126	      56 61 6C 65 6E 74	69+
    127	      6E 65 27 73 20 44	61+
    128	      79 21 0D 0A 24
    129
    130				     end	     Start
Turbo Assembler	 Version 4.1	    02/13/25 06:56:40	    Page 4
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "02/13/25"
??FILENAME			  Text	 "simplefr"
??TIME				  Text	 "06:56:40"
??VERSION			  Number 040A
@32BIT				  Text	 0
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0101H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 SIMPLEFR
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
DRAWFRAME			  Near	 DGROUP:012A
DRAWLINE			  Near	 DGROUP:015A
FINDCENTER			  Near	 DGROUP:010F
FRAME_STYLE			  Byte	 DGROUP:017F
INTERNALLINES			  Near	 DGROUP:013B
MAINLINE			  Near	 DGROUP:016A
START				  Near	 DGROUP:0100
STRING				  Byte	 DGROUP:0188

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  0000 Word	  Public  DATA
  _TEXT				  16  01B0 Word	  Public  CODE
